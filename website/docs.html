<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Complete documentation for Accessibility Widget v1 - API reference, configuration, WCAG coverage, and more.">
  <title>Documentation — Accessibility Widget v1</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="../a11y-widget.css">
  <script>
    window.__A11Y_WIDGET__ = {
      siteId: "docs-site",
      position: "right",
      surfaces: ["body", "main"],
      enableTelemetry: false
    };
  </script>
  <script src="../a11y-widget.js" defer></script>
</head>
<body>
  <header class="header">
    <nav class="nav">
      <a href="index.html" class="nav-logo">Accessibility Widget v1</a>
      <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">☰</button>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="getting-started.html">Getting Started</a></li>
        <li><a href="tutorials.html">Tutorials</a></li>
        <li><a href="examples.html">Examples</a></li>
        <li><a href="download.html">Download</a></li>
        <li><a href="docs.html">Documentation</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="section">
      <div class="container container-narrow">
        <h1>Documentation</h1>
        <p>Complete reference documentation for Accessibility Widget v1.</p>

        <h2 id="api-reference">API Reference</h2>

        <div class="card">
          <h3>Configuration Options</h3>
          <p>All configuration is via <code>window.__A11Y_WIDGET__</code> object:</p>
          <div class="code-block">
            <button class="code-block-copy" aria-label="Copy code">Copy</button>
            <pre><code>window.__A11Y_WIDGET__ = {
  siteId: "string",              // Required: Site identifier
  position: "left" | "right",     // Widget position (default: "right")
  surfaces: ["string"],           // CSS selectors for surfaces (default: ["body"])
  enableTelemetry: boolean,       // Enable telemetry (default: false)
  telemetryEndpoint: "string",    // Backend endpoint (default: null)
  zIndex: number,                 // Widget z-index (default: 2147483000)
  initialOpen: boolean,           // Open on load (default: false)
  locale: "string",               // Locale (default: "en")
  features: {                     // Feature flags
    contrast: boolean,
    fontScale: boolean,
    spacing: boolean,
    reduceMotion: boolean,
    readableFont: boolean,
    presets: boolean,
    reset: boolean,
    skipLink: boolean
  }
};</code></pre>
          </div>
        </div>

        <div class="card" style="margin-top: 2rem;">
          <h3>Global API</h3>
          <p>After the widget loads, access it via <code>window.__a11yWidget</code>:</p>
          <div class="code-block">
            <button class="code-block-copy" aria-label="Copy code">Copy</button>
            <pre><code>// Get current preferences
var prefs = window.__a11yWidget.getPrefs();

// Set preferences programmatically
window.__a11yWidget.setPrefs({
  contrast: "high",
  fontScale: 1.4
});

// Reset to defaults
window.__a11yWidget.reset();

// Get configuration
var config = window.__a11yWidget.config;</code></pre>
          </div>
        </div>

        <h2 id="telemetry">Telemetry</h2>

        <div class="card">
          <h3>Events</h3>
          <p>If <code>enableTelemetry: true</code>, the widget emits these events:</p>
          <ul>
            <li><code>widget_open</code> — Widget panel opened</li>
            <li><code>setting_change</code> — User changed a setting</li>
            <li><code>reset</code> — User reset preferences</li>
            <li><code>widget_close</code> — Widget panel closed</li>
          </ul>
          <p>Events include: <code>siteId</code>, <code>event</code>, <code>payload</code>, <code>url</code>, <code>userAgent</code> (no PII).</p>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <h3>Client-Side Listeners</h3>
          <p>Listen for events via CustomEvent:</p>
          <div class="code-block">
            <button class="code-block-copy" aria-label="Copy code">Copy</button>
            <pre><code>window.addEventListener('a11yWidget:event', function(e) {
  console.log('Widget event:', e.detail);
  // e.detail contains: { event, siteId, ts, ...payload }
});</code></pre>
          </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <h3>Backend Endpoint</h3>
          <p>If <code>telemetryEndpoint</code> is set, events are POSTed to your backend:</p>
          <div class="code-block">
            <button class="code-block-copy" aria-label="Copy code">Copy</button>
            <pre><code>POST /api/telemetry
Content-Type: application/json

{
  "siteId": "your-site-id",
  "event": "widget_open",
  "payload": {},
  "url": "https://example.com/page",
  "userAgent": "Mozilla/5.0..."
}</code></pre>
          </div>
        </div>

        <h2 id="wcag-coverage">WCAG 2.1 AA Coverage</h2>

        <div class="card">
          <p><strong>Scope:</strong> Widget UI + declared surfaces only</p>
          <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
              <tr style="border-bottom: 2px solid var(--color-border);">
                <th style="text-align: left; padding: 0.5rem;">Criterion</th>
                <th style="text-align: left; padding: 0.5rem;">Level</th>
                <th style="text-align: left; padding: 0.5rem;">Covered</th>
              </tr>
            </thead>
            <tbody>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">1.4.3 Contrast (Minimum)</td>
                <td style="padding: 0.5rem;">AA</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">1.4.4 Resize text</td>
                <td style="padding: 0.5rem;">AA</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">1.4.10 Reflow</td>
                <td style="padding: 0.5rem;">AA</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">1.4.12 Text spacing</td>
                <td style="padding: 0.5rem;">AA</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">2.1.1 Keyboard</td>
                <td style="padding: 0.5rem;">A</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">2.4.1 Bypass blocks</td>
                <td style="padding: 0.5rem;">A</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">2.4.7 Focus visible</td>
                <td style="padding: 0.5rem;">AA</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">3.2.3 Consistent navigation</td>
                <td style="padding: 0.5rem;">AA</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--color-border);">
                <td style="padding: 0.5rem;">3.3.2 Labels/instructions</td>
                <td style="padding: 0.5rem;">A</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;">4.1.2 Name, role, value</td>
                <td style="padding: 0.5rem;">A</td>
                <td style="padding: 0.5rem;">✅</td>
              </tr>
            </tbody>
          </table>
          <p style="margin-top: 1rem;">
            <a href="../wcag-matrix.md" target="_blank">View detailed WCAG coverage matrix →</a>
          </p>
        </div>

        <h2 id="support-statement">Support Statement</h2>

        <div class="card">
          <h3>What This Widget Covers</h3>
          <ul>
            <li>Widget UI accessibility</li>
            <li>Declared content surfaces (elements you specify)</li>
            <li>User preference controls</li>
            <li>Keyboard and screen reader support</li>
            <li>Preference persistence</li>
          </ul>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <h3>What This Widget Does Not Cover</h3>
          <ul>
            <li>Host-site HTML outside declared surfaces</li>
            <li>Third-party embeds (maps, iframes, booking engines)</li>
            <li>PDFs or downloads</li>
            <li>Full-site ADA compliance guarantee</li>
            <li>Lawsuit protection or legal assurance</li>
          </ul>
        </div>

        <p style="margin-top: 2rem;">
          <a href="../support-statement.md" target="_blank">Read the full support statement →</a>
        </p>

        <h2>Additional Resources</h2>

        <div class="card-grid">
          <div class="card">
            <h3>Developer Guide</h3>
            <p>Architecture, code structure, and contributing guidelines.</p>
            <a href="../docs/DEVELOPER.md" target="_blank" class="btn btn-secondary">View Guide</a>
          </div>

          <div class="card">
            <h3>Acceptance Tests</h3>
            <p>Complete test checklist for keyboard, screen reader, and visual tests.</p>
            <a href="../docs/ACCEPTANCE_TESTS.md" target="_blank" class="btn btn-secondary">View Tests</a>
          </div>

          <div class="card">
            <h3>Review & Testing</h3>
            <p>How to review the code and test the widget on your website.</p>
            <a href="../docs/REVIEW_AND_TESTING.md" target="_blank" class="btn btn-secondary">View Guide</a>
          </div>
        </div>

        <h2>Quick Links</h2>

        <div class="card">
          <ul style="list-style: none; padding: 0;">
            <li style="margin: 0.5rem 0;"><a href="getting-started.html">→ Getting Started Guide</a></li>
            <li style="margin: 0.5rem 0;"><a href="tutorials.html">→ Platform-Specific Tutorials</a></li>
            <li style="margin: 0.5rem 0;"><a href="examples.html">→ Live Examples</a></li>
            <li style="margin: 0.5rem 0;"><a href="download.html">→ Download Example HTML</a></li>
            <li style="margin: 0.5rem 0;"><a href="../DEPLOYMENT.md" target="_blank">→ Deployment Guide</a></li>
            <li style="margin: 0.5rem 0;"><a href="../README.md" target="_blank">→ README</a></li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-links">
        <a href="getting-started.html">Getting Started</a>
        <a href="tutorials.html">Tutorials</a>
        <a href="examples.html">Examples</a>
        <a href="download.html">Download</a>
        <a href="docs.html">Documentation</a>
      </div>
      <p>Accessibility Widget v1 — WCAG 2.1 AA-aligned enhancements for supported surfaces only.</p>
    </div>
  </footer>

  <script src="js/main.js"></script>
</body>
</html>

